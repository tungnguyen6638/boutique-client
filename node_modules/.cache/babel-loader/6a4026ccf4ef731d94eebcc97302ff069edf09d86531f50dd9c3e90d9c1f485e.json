{"ast":null,"code":"import{useParams,useRouteLoaderData}from\"react-router-dom\";import styles from\"./ProductDetail.module.css\";import{useDispatch}from\"react-redux\";import{categoryActions}from\"../../store/categorySlice\";import{useEffect,useRef}from\"react\";import{cartActions}from\"../../store/cartSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const ProductDetail=()=>{// Scroll tới đầu trang\nwindow.scrollTo(0,0);// Dùng param để lấy productId\nconst params=useParams();const productId=params.productId;// Lấy data từ loader của Route có id là root để lấy user đang login\nconst data=useRouteLoaderData(\"root\");const currentUser=data.user;const dispatch=useDispatch();// Lấy dữ liệu của product hiện tại đang được xem\nconst productDetail=data.data.filter(product=>product[\"_id\"][\"$oid\"]===productId)[0];useEffect(()=>{// Set category để xài cho Related Product\ndispatch(categoryActions.setCategory(productDetail.category));},[dispatch,productDetail.category]);// useRef để lấy thông tin về quantity được nhập\nconst quantityRef=useRef();// Hành động khi click vào nút Add\nconst addCartHandler=()=>{// Hiện thông báo nếu chưa đăng nhập thì không cho add vào cart\nif(!currentUser){window.alert(\"Please login to add this product to your cart\");return;}const cartItem={product:productDetail,quantity:Number(quantityRef.current.value),total:Number(productDetail.price)*Number(quantityRef.current.value)};// Dispatch tới action addCart trong slice\ndispatch(cartActions.addCart(cartItem));// Thông báo add thành công\nwindow.alert(\"Your product has beed added to cart!!\");};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:styles[\"detail-container\"],children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-sm-flex gap-4 py-5 \".concat(styles[\"detail\"]),children:[/*#__PURE__*/_jsxs(\"picture\",{className:\"d-sm-flex d-none gap-4 flex-column align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:productDetail.img1,className:\"image-fuild w-25\",alt:\"Product Detail 1\"}),/*#__PURE__*/_jsx(\"img\",{src:productDetail.img2,className:\"image-fuild w-25\",alt:\"Product Detail 2\"}),/*#__PURE__*/_jsx(\"img\",{src:productDetail.img3,className:\"image-fuild w-25\",alt:\"Product Detail 3\"}),/*#__PURE__*/_jsx(\"img\",{src:productDetail.img4,className:\"image-fuild w-25\",alt:\"Product Detail 4\"})]}),/*#__PURE__*/_jsx(\"picture\",{children:/*#__PURE__*/_jsx(\"img\",{src:productDetail.img1,className:\"w-100\",alt:\"Product Detail 1\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pb-3\",children:productDetail.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",Number(productDetail.price).toLocaleString(\"de-DE\"),\" VND\"]}),/*#__PURE__*/_jsx(\"p\",{children:productDetail.short_desc}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category : \",/*#__PURE__*/_jsx(\"span\",{children:productDetail.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Quantity\",ref:quantityRef}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append \".concat(styles[\"btn-add\"]),children:/*#__PURE__*/_jsx(\"button\",{onClick:addCartHandler,className:\"btn \",type:\"button\",children:\"Add to cart\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"py-2 px-3 \".concat(styles[\"description-header\"]),children:\"Description\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"py-3 \".concat(styles[\"description-header-3\"]),children:\"Product description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 pb-4 ps-2 \".concat(styles[\"long-desc\"]),children:productDetail.long_desc})]})]})})});};export default ProductDetail;","map":{"version":3,"names":["useParams","useRouteLoaderData","styles","useDispatch","categoryActions","useEffect","useRef","cartActions","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductDetail","window","scrollTo","params","productId","data","currentUser","user","dispatch","productDetail","filter","product","setCategory","category","quantityRef","addCartHandler","alert","cartItem","quantity","Number","current","value","total","price","addCart","children","className","concat","src","img1","alt","img2","img3","img4","name","toLocaleString","short_desc","type","placeholder","ref","onClick","long_desc"],"sources":["D:/ReactJS/Assignment 03/rjs-asm03/src/components/products/ProductDetail.jsx"],"sourcesContent":["import { useParams, useRouteLoaderData } from \"react-router-dom\";\r\nimport styles from \"./ProductDetail.module.css\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { categoryActions } from \"../../store/categorySlice\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { cartActions } from \"../../store/cartSlice\";\r\n\r\nconst ProductDetail = () => {\r\n  // Scroll tới đầu trang\r\n  window.scrollTo(0, 0);\r\n\r\n  // Dùng param để lấy productId\r\n  const params = useParams();\r\n  const productId = params.productId;\r\n  // Lấy data từ loader của Route có id là root để lấy user đang login\r\n  const data = useRouteLoaderData(\"root\");\r\n  const currentUser = data.user;\r\n  const dispatch = useDispatch();\r\n  // Lấy dữ liệu của product hiện tại đang được xem\r\n  const productDetail = data.data.filter(\r\n    (product) => product[\"_id\"][\"$oid\"] === productId\r\n  )[0];\r\n\r\n  useEffect(() => {\r\n    // Set category để xài cho Related Product\r\n    dispatch(categoryActions.setCategory(productDetail.category));\r\n  }, [dispatch, productDetail.category]);\r\n\r\n  // useRef để lấy thông tin về quantity được nhập\r\n  const quantityRef = useRef();\r\n\r\n  // Hành động khi click vào nút Add\r\n  const addCartHandler = () => {\r\n    // Hiện thông báo nếu chưa đăng nhập thì không cho add vào cart\r\n    if (!currentUser) {\r\n      window.alert(\"Please login to add this product to your cart\");\r\n      return;\r\n    }\r\n\r\n    const cartItem = {\r\n      product: productDetail,\r\n      quantity: Number(quantityRef.current.value),\r\n      total: Number(productDetail.price) * Number(quantityRef.current.value),\r\n    };\r\n\r\n    // Dispatch tới action addCart trong slice\r\n    dispatch(cartActions.addCart(cartItem));\r\n    // Thông báo add thành công\r\n    window.alert(\"Your product has beed added to cart!!\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={styles[\"detail-container\"]}>\r\n        <div className=\"container mb-0\">\r\n          <div className={`d-sm-flex gap-4 py-5 ${styles[\"detail\"]}`}>\r\n            <picture className=\"d-sm-flex d-none gap-4 flex-column align-items-center\">\r\n              <img\r\n                src={productDetail.img1}\r\n                className=\"image-fuild w-25\"\r\n                alt=\"Product Detail 1\"\r\n              ></img>\r\n              <img\r\n                src={productDetail.img2}\r\n                className=\"image-fuild w-25\"\r\n                alt=\"Product Detail 2\"\r\n              ></img>\r\n              <img\r\n                src={productDetail.img3}\r\n                className=\"image-fuild w-25\"\r\n                alt=\"Product Detail 3\"\r\n              ></img>\r\n              <img\r\n                src={productDetail.img4}\r\n                className=\"image-fuild w-25\"\r\n                alt=\"Product Detail 4\"\r\n              ></img>\r\n            </picture>\r\n\r\n            <picture>\r\n              <img\r\n                src={productDetail.img1}\r\n                className=\"w-100\"\r\n                alt=\"Product Detail 1\"\r\n              ></img>\r\n            </picture>\r\n\r\n            <div>\r\n              <h2 className=\"pb-3\">{productDetail.name}</h2>\r\n              <p> {Number(productDetail.price).toLocaleString(\"de-DE\")} VND</p>\r\n              <p>{productDetail.short_desc}</p>\r\n              <p>\r\n                Category : <span>{productDetail.category}</span>\r\n              </p>\r\n              <div className=\"input-group mb-3\">\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Quantity\"\r\n                  ref={quantityRef}\r\n                />\r\n                <div className={`input-group-append ${styles[\"btn-add\"]}`}>\r\n                  <button\r\n                    onClick={addCartHandler}\r\n                    className={`btn `}\r\n                    type=\"button\"\r\n                  >\r\n                    Add to cart\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <h2 className={`py-2 px-3 ${styles[\"description-header\"]}`}>\r\n              Description\r\n            </h2>\r\n            <h3 className={`py-3 ${styles[\"description-header-3\"]}`}>\r\n              Product description\r\n            </h3>\r\n            <p className={`mb-0 pb-4 ps-2 ${styles[\"long-desc\"]}`}>\r\n              {productDetail.long_desc}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,kBAAkB,KAAQ,kBAAkB,CAChE,MAAO,CAAAC,MAAM,KAAM,4BAA4B,CAC/C,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,eAAe,KAAQ,2BAA2B,CAC3D,OAASC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACzC,OAASC,WAAW,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEpD,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B;AACAC,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAE,CAAC,CAAC,CAErB;AACA,KAAM,CAAAC,MAAM,CAAGjB,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAkB,SAAS,CAAGD,MAAM,CAACC,SAAS,CAClC;AACA,KAAM,CAAAC,IAAI,CAAGlB,kBAAkB,CAAC,MAAM,CAAC,CACvC,KAAM,CAAAmB,WAAW,CAAGD,IAAI,CAACE,IAAI,CAC7B,KAAM,CAAAC,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAC9B;AACA,KAAM,CAAAoB,aAAa,CAAGJ,IAAI,CAACA,IAAI,CAACK,MAAM,CACnCC,OAAO,EAAKA,OAAO,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,GAAKP,SAC1C,CAAC,CAAC,CAAC,CAAC,CAEJb,SAAS,CAAC,IAAM,CACd;AACAiB,QAAQ,CAAClB,eAAe,CAACsB,WAAW,CAACH,aAAa,CAACI,QAAQ,CAAC,CAAC,CAC/D,CAAC,CAAE,CAACL,QAAQ,CAAEC,aAAa,CAACI,QAAQ,CAAC,CAAC,CAEtC;AACA,KAAM,CAAAC,WAAW,CAAGtB,MAAM,CAAC,CAAC,CAE5B;AACA,KAAM,CAAAuB,cAAc,CAAGA,CAAA,GAAM,CAC3B;AACA,GAAI,CAACT,WAAW,CAAE,CAChBL,MAAM,CAACe,KAAK,CAAC,+CAA+C,CAAC,CAC7D,OACF,CAEA,KAAM,CAAAC,QAAQ,CAAG,CACfN,OAAO,CAAEF,aAAa,CACtBS,QAAQ,CAAEC,MAAM,CAACL,WAAW,CAACM,OAAO,CAACC,KAAK,CAAC,CAC3CC,KAAK,CAAEH,MAAM,CAACV,aAAa,CAACc,KAAK,CAAC,CAAGJ,MAAM,CAACL,WAAW,CAACM,OAAO,CAACC,KAAK,CACvE,CAAC,CAED;AACAb,QAAQ,CAACf,WAAW,CAAC+B,OAAO,CAACP,QAAQ,CAAC,CAAC,CACvC;AACAhB,MAAM,CAACe,KAAK,CAAC,uCAAuC,CAAC,CACvD,CAAC,CAED,mBACErB,IAAA,CAAAI,SAAA,EAAA0B,QAAA,cACE9B,IAAA,QAAK+B,SAAS,CAAEtC,MAAM,CAAC,kBAAkB,CAAE,CAAAqC,QAAA,cACzC5B,KAAA,QAAK6B,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7B5B,KAAA,QAAK6B,SAAS,yBAAAC,MAAA,CAA0BvC,MAAM,CAAC,QAAQ,CAAC,CAAG,CAAAqC,QAAA,eACzD5B,KAAA,YAAS6B,SAAS,CAAC,uDAAuD,CAAAD,QAAA,eACxE9B,IAAA,QACEiC,GAAG,CAAEnB,aAAa,CAACoB,IAAK,CACxBH,SAAS,CAAC,kBAAkB,CAC5BI,GAAG,CAAC,kBAAkB,CAClB,CAAC,cACPnC,IAAA,QACEiC,GAAG,CAAEnB,aAAa,CAACsB,IAAK,CACxBL,SAAS,CAAC,kBAAkB,CAC5BI,GAAG,CAAC,kBAAkB,CAClB,CAAC,cACPnC,IAAA,QACEiC,GAAG,CAAEnB,aAAa,CAACuB,IAAK,CACxBN,SAAS,CAAC,kBAAkB,CAC5BI,GAAG,CAAC,kBAAkB,CAClB,CAAC,cACPnC,IAAA,QACEiC,GAAG,CAAEnB,aAAa,CAACwB,IAAK,CACxBP,SAAS,CAAC,kBAAkB,CAC5BI,GAAG,CAAC,kBAAkB,CAClB,CAAC,EACA,CAAC,cAEVnC,IAAA,YAAA8B,QAAA,cACE9B,IAAA,QACEiC,GAAG,CAAEnB,aAAa,CAACoB,IAAK,CACxBH,SAAS,CAAC,OAAO,CACjBI,GAAG,CAAC,kBAAkB,CAClB,CAAC,CACA,CAAC,cAEVjC,KAAA,QAAA4B,QAAA,eACE9B,IAAA,OAAI+B,SAAS,CAAC,MAAM,CAAAD,QAAA,CAAEhB,aAAa,CAACyB,IAAI,CAAK,CAAC,cAC9CrC,KAAA,MAAA4B,QAAA,EAAG,GAAC,CAACN,MAAM,CAACV,aAAa,CAACc,KAAK,CAAC,CAACY,cAAc,CAAC,OAAO,CAAC,CAAC,MAAI,EAAG,CAAC,cACjExC,IAAA,MAAA8B,QAAA,CAAIhB,aAAa,CAAC2B,UAAU,CAAI,CAAC,cACjCvC,KAAA,MAAA4B,QAAA,EAAG,aACU,cAAA9B,IAAA,SAAA8B,QAAA,CAAOhB,aAAa,CAACI,QAAQ,CAAO,CAAC,EAC/C,CAAC,cACJhB,KAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/B9B,IAAA,UACE0C,IAAI,CAAC,QAAQ,CACbX,SAAS,CAAC,cAAc,CACxBY,WAAW,CAAC,UAAU,CACtBC,GAAG,CAAEzB,WAAY,CAClB,CAAC,cACFnB,IAAA,QAAK+B,SAAS,uBAAAC,MAAA,CAAwBvC,MAAM,CAAC,SAAS,CAAC,CAAG,CAAAqC,QAAA,cACxD9B,IAAA,WACE6C,OAAO,CAAEzB,cAAe,CACxBW,SAAS,OAAS,CAClBW,IAAI,CAAC,QAAQ,CAAAZ,QAAA,CACd,aAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,EACH,CAAC,EACH,CAAC,cAEN5B,KAAA,QAAA4B,QAAA,eACE9B,IAAA,OAAI+B,SAAS,cAAAC,MAAA,CAAevC,MAAM,CAAC,oBAAoB,CAAC,CAAG,CAAAqC,QAAA,CAAC,aAE5D,CAAI,CAAC,cACL9B,IAAA,OAAI+B,SAAS,SAAAC,MAAA,CAAUvC,MAAM,CAAC,sBAAsB,CAAC,CAAG,CAAAqC,QAAA,CAAC,qBAEzD,CAAI,CAAC,cACL9B,IAAA,MAAG+B,SAAS,mBAAAC,MAAA,CAAoBvC,MAAM,CAAC,WAAW,CAAC,CAAG,CAAAqC,QAAA,CACnDhB,aAAa,CAACgC,SAAS,CACvB,CAAC,EACD,CAAC,EACH,CAAC,CACH,CAAC,CACN,CAAC,CAEP,CAAC,CAED,cAAe,CAAAzC,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}