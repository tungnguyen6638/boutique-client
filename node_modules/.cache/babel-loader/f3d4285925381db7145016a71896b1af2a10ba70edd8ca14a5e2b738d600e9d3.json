{"ast":null,"code":"import{memo}from\"react\";import ProductItem from\"./ProductItem\";import{useSelector}from\"react-redux\";import Pagenation from\"../pagenation/Pagenation\";import Popup from\"../popup/Popup\";import NoProductError from\"../../pages/error/NoProductError\";// Hàm lấy segments (mỗi segment là 1 page)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function getSegments(products,totalResults,productsPerPage){// array tạm của product\nconst temp=[...products];const totalSegments=Math.ceil(totalResults/productsPerPage);// Biến tạm để lấy một segment\nconst segmentArr=[];// Toàn bộ segment\nconst allSegmentArr=[];for(let i=0;i<totalSegments;i++){for(let j=0;j<6;j++){// Vòng lặp này để lấy 6 phần từ đầu của array tạm để gắn cho segment\n// Lấy xong sẽ cắt array tạm đi\nif(temp.length===0){break;}segmentArr.push(temp.shift());}// Khi kết thúc vòng lặp thì sẽ push segment tạm vào segment tổng rồi reset segment tạm để phục vụ vòng lặp tiếp theo\nallSegmentArr.push([...segmentArr]);segmentArr.splice(0,segmentArr.length);}return allSegmentArr;}const ShopProductsList=/*#__PURE__*/memo(_ref=>{let{products}=_ref;const segments=getSegments(products,products.length,6);// currentPage được lưu trong redux nên không cần phải truyền vào component Pagenation\nconst currentPage=useSelector(state=>state.pagenation.currentPage);const isVisible=useSelector(state=>state.popup.isVisible);// 6 item được render sẽ là segment của current page vì lấy index trong list segment nên phải trừ 1\nconst firstSixItems=segments[currentPage-1];// Nếu không có 6 item thì sẽ render trang error\nif(!firstSixItems){return/*#__PURE__*/_jsx(NoProductError,{});}const firstLineItems=firstSixItems.filter((product,index)=>index>=0&&index<=2);const secondLineItems=firstSixItems.filter((product,index)=>index>=3&&index<=5);return/*#__PURE__*/_jsxs(_Fragment,{children:[isVisible&&/*#__PURE__*/_jsx(Popup,{}),firstSixItems&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-sm-row flex-column align-items-center\",children:firstLineItems.map(product=>/*#__PURE__*/_jsx(ProductItem,{product:product},product[\"_id\"][\"$oid\"]))}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-sm-row flex-column align-items-center\",children:secondLineItems.map(product=>/*#__PURE__*/_jsx(ProductItem,{product:product},product[\"_id\"][\"$oid\"]))}),/*#__PURE__*/_jsx(Pagenation,{totalResults:products.length,segments:segments})]})]});});export default ShopProductsList;","map":{"version":3,"names":["memo","ProductItem","useSelector","Pagenation","Popup","NoProductError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getSegments","products","totalResults","productsPerPage","temp","totalSegments","Math","ceil","segmentArr","allSegmentArr","i","j","length","push","shift","splice","ShopProductsList","_ref","segments","currentPage","state","pagenation","isVisible","popup","firstSixItems","firstLineItems","filter","product","index","secondLineItems","children","className","map"],"sources":["D:/ReactJS/Assignment 03/rjs-asm03/src/components/products/ShopProductsList.jsx"],"sourcesContent":["import { memo } from \"react\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Pagenation from \"../pagenation/Pagenation\";\r\nimport Popup from \"../popup/Popup\";\r\nimport NoProductError from \"../../pages/error/NoProductError\";\r\n\r\n// Hàm lấy segments (mỗi segment là 1 page)\r\nfunction getSegments(products, totalResults, productsPerPage) {\r\n  // array tạm của product\r\n  const temp = [...products];\r\n  const totalSegments = Math.ceil(totalResults / productsPerPage);\r\n  // Biến tạm để lấy một segment\r\n  const segmentArr = [];\r\n  // Toàn bộ segment\r\n  const allSegmentArr = [];\r\n  for (let i = 0; i < totalSegments; i++) {\r\n    for (let j = 0; j < 6; j++) {\r\n      // Vòng lặp này để lấy 6 phần từ đầu của array tạm để gắn cho segment\r\n      // Lấy xong sẽ cắt array tạm đi\r\n      if (temp.length === 0) {\r\n        break;\r\n      }\r\n      segmentArr.push(temp.shift());\r\n    }\r\n    // Khi kết thúc vòng lặp thì sẽ push segment tạm vào segment tổng rồi reset segment tạm để phục vụ vòng lặp tiếp theo\r\n    allSegmentArr.push([...segmentArr]);\r\n    segmentArr.splice(0, segmentArr.length);\r\n  }\r\n\r\n  return allSegmentArr;\r\n}\r\n\r\nconst ShopProductsList = memo(({ products }) => {\r\n  const segments = getSegments(products, products.length, 6);\r\n  // currentPage được lưu trong redux nên không cần phải truyền vào component Pagenation\r\n  const currentPage = useSelector((state) => state.pagenation.currentPage);\r\n  const isVisible = useSelector((state) => state.popup.isVisible);\r\n  // 6 item được render sẽ là segment của current page vì lấy index trong list segment nên phải trừ 1\r\n  const firstSixItems = segments[currentPage - 1];\r\n\r\n  // Nếu không có 6 item thì sẽ render trang error\r\n  if (!firstSixItems) {\r\n    return <NoProductError />;\r\n  }\r\n  const firstLineItems = firstSixItems.filter(\r\n    (product, index) => index >= 0 && index <= 2\r\n  );\r\n\r\n  const secondLineItems = firstSixItems.filter(\r\n    (product, index) => index >= 3 && index <= 5\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {isVisible && <Popup />}\r\n      {firstSixItems && (\r\n        <div className=\"d-flex flex-column\">\r\n          <div className=\"d-flex flex-sm-row flex-column align-items-center\">\r\n            {firstLineItems.map((product) => (\r\n              <ProductItem key={product[\"_id\"][\"$oid\"]} product={product} />\r\n            ))}\r\n          </div>\r\n          <div className=\"d-flex flex-sm-row flex-column align-items-center\">\r\n            {secondLineItems.map((product) => (\r\n              <ProductItem key={product[\"_id\"][\"$oid\"]} product={product} />\r\n            ))}\r\n          </div>\r\n          <Pagenation totalResults={products.length} segments={segments} />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default ShopProductsList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}